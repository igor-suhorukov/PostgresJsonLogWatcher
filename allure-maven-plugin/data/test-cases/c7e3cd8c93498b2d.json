{"uid":"c7e3cd8c93498b2d","name":"testWatchPostgreSqlLogsWithContainer(Path)","fullName":"com.github.isuhorukov.log.watcher.PostgreSqlJsonContainerIT.testWatchPostgreSqlLogsWithContainer","historyId":"3f0d65a2dde6c8b93b0543ab6c6d5044","time":{"start":1725483778133,"stop":1725483797346,"duration":19213},"description":"Tests the functionality of watching PostgreSQL logs using a Docker container","descriptionHtml":"<p>Tests the functionality of watching PostgreSQL logs using a Docker container</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"Tests the functionality of watching PostgreSQL logs using a Docker container","status":"passed","steps":[{"name":"a temporary directory for Postgres data and log files","time":{"start":1725483778315,"stop":1725483778401,"duration":86},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"arg0","value":"/tmp/junit16355853388407342874"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"configure PostgreSQL container","time":{"start":1725483778411,"stop":1725483778584,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"arg0","value":"/tmp/junit16355853388407342874/pg_data"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"I start the PostgreSQL container with specific logging configurations","time":{"start":1725483778615,"stop":1725483794270,"duration":15655},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"arg0","value":"GenericContainer(extraHosts=[], image=RemoteDockerImage(imageName=postgres:16, imagePullPolicy=DefaultPullPolicy(), imageNameSubstitutor=org.testcontainers.utility.ImageNameSubstitutor$LogWrappedImageNameSubstitutor@570cf9d5), volumesFroms=[], linkedContainers={}, startupCheckStrategy=org.testcontainers.containers.startupcheck.IsRunningStartupCheckStrategy@6e8276db, startupAttempts=1, workingDirectory=null, shmSize=null, copyToFileContainerPathMap={}, copyToTransferableContainerPathMap={}, dependencies=[], dockerClient=LazyDockerClient, containerId=null, containerInfo=null, waitStrategy=org.testcontainers.containers.wait.strategy.LogMessageWaitStrategy@254bd293, logConsumers=[], tmpFsMapping=null, shouldBeReused=false, hostAccessible=false, createContainerCmdModifiers=[], containerDef=org.testcontainers.containers.ContainerDef@2106b1f0)"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"application should detect and process log entries from the PostgreSQL logs","time":{"start":1725483794270,"stop":1725483797013,"duration":2743},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"arg0","value":"GenericContainer(extraHosts=[], image=RemoteDockerImage(imageName=postgres:16, imagePullPolicy=DefaultPullPolicy(), imageNameSubstitutor=org.testcontainers.utility.ImageNameSubstitutor$LogWrappedImageNameSubstitutor@570cf9d5), volumesFroms=[], linkedContainers={}, startupCheckStrategy=org.testcontainers.containers.startupcheck.IsRunningStartupCheckStrategy@6e8276db, startupAttempts=1, workingDirectory=null, shmSize=null, copyToFileContainerPathMap={}, copyToTransferableContainerPathMap={}, dependencies=[], dockerClient=LazyDockerClient, containerId=3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173, containerInfo=InspectContainerResponse(args=[-c, log_statement=all, -c, log_destination=jsonlog, -c, logging_collector=on, -c, log_statement=all, -c, compute_query_id=on, -c, log_duration=on, -c, shared_preload_libraries=pg_stat_statements, -c, track_io_timing=true, -c, log_min_duration_statement=0, -c, log_checkpoints=on, -c, log_connections=on, -c, log_disconnections=on, -c, log_min_messages=DEBUG5], config=ContainerConfig(attachStderr=false, attachStdin=false, attachStdout=false, cmd=[-c, log_statement=all, -c, log_destination=jsonlog, -c, logging_collector=on, -c, log_statement=all, -c, compute_query_id=on, -c, log_duration=on, -c, shared_preload_libraries=pg_stat_statements, -c, track_io_timing=true, -c, log_min_duration_statement=0, -c, log_checkpoints=on, -c, log_connections=on, -c, log_disconnections=on, -c, log_min_messages=DEBUG5], domainName=, entrypoint=[docker-entrypoint.sh], env=[POSTGRES_USER=test, POSTGRES_PASSWORD=test, POSTGRES_DB=testdb, PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/postgresql/16/bin, GOSU_VERSION=1.17, LANG=en_US.utf8, PG_MAJOR=16, PG_VERSION=16.4-1.pgdg120+1, PGDATA=/var/lib/postgresql/data], exposedPorts=[5432/tcp], hostName=3b7fe0b124ab, image=postgres:16, labels={org.testcontainers=true, org.testcontainers.lang=java, org.testcontainers.sessionId=283433a8-42c4-49b1-a3bc-1121c01d7c7b, org.testcontainers.version=1.20.1}, macAddress=null, networkDisabled=null, onBuild=null, stdinOpen=false, portSpecs=null, stdInOnce=false, tty=false, user=, volumes={/var/lib/postgresql/data={}}, workingDir=, healthCheck=null), created=2024-09-04T21:03:10.278976815Z, driver=overlay2, execDriver=null, hostConfig=HostConfig(binds=[/tmp/junit16355853388407342874/pg_data:/var/lib/postgresql/data:rw,z], blkioWeight=0, blkioWeightDevice=null, blkioDeviceReadBps=null, blkioDeviceWriteBps=null, blkioDeviceReadIOps=null, blkioDeviceWriteIOps=null, memorySwappiness=null, nanoCPUs=0, capAdd=null, capDrop=null, containerIDFile=, cpuPeriod=0, cpuRealtimePeriod=0, cpuRealtimeRuntime=0, cpuShares=0, cpuQuota=0, cpusetCpus=, cpusetMems=, devices=null, deviceCgroupRules=null, deviceRequests=null, diskQuota=null, dns=null, dnsOptions=null, dnsSearch=null, extraHosts=[], groupAdd=null, ipcMode=shareable, cgroup=, links=[], logConfig=LogConfig(type=json-file, config={}), lxcConf=null, memory=0, memorySwap=0, memoryReservation=0, kernelMemory=null, networkMode=bridge, oomKillDisable=null, init=null, autoRemove=false, oomScoreAdj=0, portBindings={5432/tcp=[Lcom.github.dockerjava.api.model.Ports$Binding;@17001499}, privileged=false, publishAllPorts=false, readonlyRootfs=false, restartPolicy=no, ulimits=null, cpuCount=0, cpuPercent=0, ioMaximumIOps=0, ioMaximumBandwidth=0, volumesFrom=[], mounts=null, pidMode=, isolation=null, securityOpts=null, storageOpt=null, cgroupParent=, volumeDriver=, shmSize=67108864, pidsLimit=null, runtime=runc, tmpFs=null, utSMode=, usernsMode=, sysctls=null, consoleSize=[0, 0], cgroupnsMode=private), hostnamePath=/var/lib/docker/containers/3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173/hostname, hostsPath=/var/lib/docker/containers/3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173/hosts, logPath=/var/lib/docker/containers/3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173/3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173-json.log, id=3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173, sizeRootFs=null, sizeRw=null, imageId=sha256:69092dbdec0ddd9e1860e67be2c040b83cce9ffec785b2f740f34e8eb43178e5, mountLabel=, name=/laughing_vaughan, restartCount=0, networkSettings=NetworkSettings(bridge=, sandboxId=02d5ad1db49c2187377805e3b3d1df7dd207758956d1bf441023a8a1369aa232, hairpinMode=false, linkLocalIPv6Address=, linkLocalIPv6PrefixLen=0, ports={5432/tcp=[Lcom.github.dockerjava.api.model.Ports$Binding;@a5b3754}, sandboxKey=/var/run/docker/netns/02d5ad1db49c, secondaryIPAddresses=null, secondaryIPv6Addresses=null, endpointID=099514998ded19e2232cd2f5971384be6c7b12a16d111125a1c7703501ffb2e1, gateway=172.17.0.1, portMapping=null, globalIPv6Address=, globalIPv6PrefixLen=0, ipAddress=172.17.0.3, ipPrefixLen=16, ipV6Gateway=, macAddress=02:42:ac:11:00:03, networks={bridge=ContainerNetwork(ipamConfig=null, links=[], aliases=null, networkID=262267e1fa018655eb035ea5bf26b3b84a2979134e756b06063645cf37896ebb, endpointId=099514998ded19e2232cd2f5971384be6c7b12a16d111125a1c7703501ffb2e1, gateway=172.17.0.1, ipAddress=172.17.0.3, ipPrefixLen=16, ipV6Gateway=, globalIPv6Address=, globalIPv6PrefixLen=0, macAddress=02:42:ac:11:00:03)}), path=docker-entrypoint.sh, processLabel=, resolvConfPath=/var/lib/docker/containers/3b7fe0b124ab53c9e7c489cc4c85efea3384d9f0eebe1ce238d6ab235cba5173/resolv.conf, execIds=null, state=InspectContainerResponse.ContainerState(status=running, running=true, paused=false, restarting=false, oomKilled=false, dead=false, pid=3539, exitCode=0, error=, startedAt=2024-09-04T21:03:10.48249901Z, finishedAt=0001-01-01T00:00:00Z, health=null), volumes=null, volumesRW=null, node=null, mounts=[InspectContainerResponse.Mount(name=null, source=/tmp/junit16355853388407342874/pg_data, destination=/var/lib/postgresql/data, driver=null, mode=rw,z, rw=true)], graphDriver=GraphDriver(name=overlay2, data=GraphData(rootDir=null, deviceId=null, deviceName=null, deviceSize=null, dir=null)), platform=linux), waitStrategy=org.testcontainers.containers.wait.strategy.LogMessageWaitStrategy@254bd293, logConsumers=[], tmpFsMapping=null, shouldBeReused=false, hostAccessible=false, createContainerCmdModifiers=[], containerDef=org.testcontainers.containers.ContainerDef@2106b1f0)"},{"name":"arg1","value":"/tmp/junit16355853388407342874/pg_data"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"logs are generated in the specified directory and watched & processed by postgres_log_parser","time":{"start":1725483797014,"stop":1725483797021,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"arg0","value":"de.dm.infrastructure.logcapture.LogCapture@e17e7a3"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"junit.platform.uniqueid","value":"[engine:junit-jupiter]/[class:com.github.isuhorukov.log.watcher.PostgreSqlJsonContainerIT]/[method:testWatchPostgreSqlLogsWithContainer(java.nio.file.Path)]"},{"name":"host","value":"fv-az714-878"},{"name":"thread","value":"3097@fv-az714-878.main(1)"},{"name":"framework","value":"junit-platform"},{"name":"language","value":"java"},{"name":"package","value":"com.github.isuhorukov.log.watcher.PostgreSqlJsonContainerIT"},{"name":"testClass","value":"com.github.isuhorukov.log.watcher.PostgreSqlJsonContainerIT"},{"name":"testMethod","value":"testWatchPostgreSqlLogsWithContainer"},{"name":"suite","value":"com.github.isuhorukov.log.watcher.PostgreSqlJsonContainerIT"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"c7e3cd8c93498b2d.json","parameterValues":[]}